{% extends "core/base.html" %}

{% load static from staticfiles %}
{% load tmdb %}

{% block custom_css %}
{{ block.super }}
<link href="{% static 'tmdb/css/progress.css' %}" rel="stylesheet">
{% endblock %}

{% block content %}
<img class="poster" src="{% poster_url show.poster_path 4 %}" alt="Poster">

<div class="right-section">
    <div class="title">
        <h4>{{ show.name }}</h4>
        <span>{{ show.vote_average }}/10</span>
        <span>{{ show.status_display }}</span>
    </div>

    <div class="details">
        <div>
            Genres:
            {% for genre in show.genres %}
            <span>{{ genre.name }}{% if not forloop.last %}, {% endif %}</span>
            {% endfor %}
        </div>
        <div>
            Languages:
            {% for language in show.languages %}
            <span>{{ language }}{% if not forloop.last %}, {% endif %}</span>
            {% endfor %}
        </div>
    </div>

    <p>{{ show.overview }}</p>

    <form method="post" novalidate>
        {% csrf_token %}

        <!-- Hidden fields. -->
        {{ form.show_id }}
        {{ form.show_name }}
        {{ form.show_poster_path }}
        {{ form.show_status }}

        <label for="{{ form.status.id_for_label }}">Status:</label>
        {{ form.status }}
        {{ form.status.errors }}

        <label for="{{ form.episodes.id_for_label }}">Last Watched:</label>
        {{ form.last_watched }}

        <div class="btn-section">
            <input class="button-primary"
                type="submit"
                value="{% if progress %}Update{% else %}Save{% endif %}">
            </input>

            {% if progress %}
            <div>
                <label for="{{ form.delete.id_for_label }}">Delete:</label>
                {{ form.delete }}
            </div>
            {% endif %}
        </div>
    </form>
</div>
{% endblock %}
